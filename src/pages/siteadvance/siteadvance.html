<ion-header>

  <ion-navbar color="secondary">
    <ion-title>Advance Form</ion-title>
  </ion-navbar>

</ion-header>
  
  
<ion-content  class="ion-content">
  
  <h3>Staff Details</h3>
  <ion-list>

    <form novalidate (ngSubmit)="submitClaim()" [formGroup]="signupform">

      <ion-item>
        <ion-label stacked color="primary">Name</ion-label>
        <ion-label>{{Name}}</ion-label>
      </ion-item>

      <ion-item>
        <ion-label stacked color="primary" class="required">Bank Account</ion-label>
        <ion-select placeholder="please select" [(ngModel)]="Bank_Name" formControlName="Bank_Name" [class.error1]="!signupform.controls.Bank_Name.valid && signupform.controls.Bank_Name.dirty">
          <ion-option *ngFor="let bank of banks" value="{{bank.Bank_Name}} - {{bank.Bank_Account_No}} ">{{bank.Bank_Name}} - {{bank.Bank_Account_No}} </ion-option>
        </ion-select>
      </ion-item>
      <ion-item no-lines *ngIf="( signupform.get('Bank_Name').hasError('required') ) && signupform.get('Bank_Name').touched">
        <div class="error" *ngIf="signupform.get('Bank_Name').hasError('required') && signupform.get('Bank_Name').touched">
          Please select your bank account
        </div>
      </ion-item>

      <ion-item>
        <ion-label stacked color="primary" class="required">Department</ion-label>
        <ion-select placeholder="please select" [(ngModel)]="Department" formControlName="Department" [class.error1]="!signupform.controls.Department.valid && signupform.controls.Department.dirty">
          <ion-option *ngFor="let depart of departs" value="{{depart.Id}}">{{depart.Project_Name}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item no-lines *ngIf="( signupform.get('Department').hasError('required') ) && signupform.get('Department').touched">
        <div class="error" *ngIf="signupform.get('Department').hasError('required') && signupform.get('Department').touched">
          Please select your department
        </div>
      </ion-item>

      <ion-item>
        <ion-label stacked color="primary">Position</ion-label>
        <ion-label>{{Position? Position: '-'}}</ion-label>
      </ion-item>

      <h3>Travelling Details</h3>

      <ion-item>
        <ion-label stacked color="primary" class="required">Destination</ion-label>
        <ion-input type="text" [(ngModel)]="Destination" formControlName="Destination" [class.error1]="!signupform.controls.Destination.valid && signupform.controls.Destination.dirty"> </ion-input>
      </ion-item>
      <ion-item no-lines *ngIf="( signupform.get('Destination').hasError('required') ) && signupform.get('Destination').touched">
        <div class="error" *ngIf="signupform.get('Destination').hasError('required') && signupform.get('Destination').touched">
          Please input your Destination
        </div>
      </ion-item>
 
      <ion-item>
        <ion-label stacked color="primary" class="required">Start Date</ion-label>
        <ion-datetime [max]="maxDateString"
          pickerFormat="DD MMM YYYY"  [(ngModel)]="Start_Date"  max="2200"
          displayFormat="DD MM YYYY" placeholder="Choose start date" formControlName="Start_Date" [class.error1]="!signupform.controls.Start_Date.valid && signupform.controls.Start_Date.dirty">
        </ion-datetime>
      </ion-item>
      <ion-item no-lines *ngIf="( signupform.get('Start_Date').hasError('required') ) && signupform.get('Start_Date').touched">
        <div class="error" *ngIf="signupform.get('Start_Date').hasError('required') && signupform.get('Start_Date').touched">
          Please pick your start date
        </div>
      </ion-item>
  
      <ion-item>
        <ion-label stacked color="primary" class="required">End Date</ion-label>
        <ion-datetime [max]="maxDateString"
          pickerFormat="DD MMM YYYY"  [(ngModel)]="End_Date"  max="2200"
          displayFormat="DD MM YYYY" placeholder="Choose end date" formControlName="End_Date" [class.error1]="!signupform.controls.End_Date.valid && signupform.controls.End_Date.dirty">
        </ion-datetime>
      </ion-item>
      <ion-item no-lines *ngIf="( signupform.get('End_Date').hasError('required') ) && signupform.get('End_Date').touched">
        <div class="error" *ngIf="signupform.get('End_Date').hasError('required') && signupform.get('End_Date').touched">
          Please pick your end date
        </div>
      </ion-item>

      <ion-item>
        <ion-label stacked color="primary" class="required">Mode Of Transport</ion-label>
        <ion-select placeholder="please select" [(ngModel)]="Mode_Of_Transport"  formControlName="Mode_Of_Transport" [class.error1]="!signupform.controls.Mode_Of_Transport.valid && signupform.controls.Mode_Of_Transport.dirty">
          <ion-option *ngFor="let mode of modes" value="{{mode.Option}}">{{mode.Option}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item no-lines *ngIf="( signupform.get('Mode_Of_Transport').hasError('required') ) && signupform.get('Mode_Of_Transport').touched">
        <div class="error" *ngIf="signupform.get('Mode_Of_Transport').hasError('required') && signupform.get('Mode_Of_Transport').touched">
          Please select your mode of transport
        </div>
      </ion-item>

      <ion-item>
        <ion-label stacked color="primary" class="required">Car Plate No:</ion-label>
        <ion-input type="text" [(ngModel)]="Car_No"  formControlName="Car_No" [class.error1]="!signupform.controls.Car_No.valid && signupform.controls.Car_No.dirty"> </ion-input>
      </ion-item>
      <ion-item no-lines *ngIf="( signupform.get('Car_No').hasError('required') ) && signupform.get('Car_No').touched">
        <div class="error" *ngIf="signupform.get('Car_No').hasError('required') && signupform.get('Car_No').touched">
          Please input your car plate number
        </div>
      </ion-item>
    <!-- </form>
  </ion-list> -->
      
      <h3>Advance Required</h3>

      <ion-grid>

        <ion-row>
          <ion-col type col-6></ion-col>
          <ion-col days col-2>No of Days</ion-col>
          <ion-col allowance-title col-2>Allowance per Day</ion-col>
          <ion-col total col-2>Total (MYR)</ion-col>
        </ion-row>

        <ion-row>
          <ion-col type col-6>Meal Allowance

            <ion-item no-lines *ngIf="signupform.errors?.identityRevealed  && signupform.get('day_meal').touched">
              <textarea readonly class="error" *ngIf="signupform.errors?.identityRevealed && signupform.get('day_meal').touched">Please input your meal day
              </textarea>
            </ion-item>

            <ion-item no-lines *ngIf="( signupform.get('all_meal').hasError('required') ) && signupform.get('all_meal').touched">
              <textarea readonly class="error" *ngIf="signupform.get('all_meal').hasError('required') && signupform.get('all_meal').touched">Please input your meal allowance per day
              </textarea>
            </ion-item>

          </ion-col>
          <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_meal" value=" " formControlName="day_meal" [class.error1]="!signupform.controls.day_meal.valid && signupform.controls.day_meal.dirty"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_meal" value=" "  formControlName="all_meal" [class.error1]="!signupform.controls.all_meal.valid && signupform.controls.all_meal.dirty"></ion-input>
          
          </ion-col>
          <!-- <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_meal" value="0"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_meal" value="0.00"></ion-input>
          </ion-col> -->
          <ion-col total col-2>
            <ion-label text-wrap type="number" placeholder="0" value="0.00">{{ totalMeal() }}</ion-label>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col type col-6>Accodommation/Hotel

            <ion-item no-lines *ngIf="signupform.errors?.identityRevealed  && signupform.get('day_acco').touched">
              <textarea readonly class="error" *ngIf="signupform.errors?.identityRevealed  && signupform.get('day_acco').touched">Please input your accodommation/hotel day
              </textarea>
            </ion-item>

            <ion-item no-lines *ngIf="( signupform.get('all_acco').hasError('required') ) && signupform.get('all_acco').touched">
              <div class="error" *ngIf="signupform.get('all_acco').hasError('required') && signupform.get('all_acco').touched">Please input your accodommation/hotel allowance per day
              </div>
            </ion-item>

          </ion-col>
          <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_acco" value=" " formControlName="day_acco" [class.error1]="!signupform.controls.day_acco.valid && signupform.controls.day_acco.dirty"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_acco" value=" " formControlName="all_acco" [class.error1]="!signupform.controls.all_acco.valid && signupform.controls.all_acco.dirty"></ion-input>
          </ion-col>
          <!-- <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_acco" value="0"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_acco" value="0"></ion-input>
          </ion-col> -->
          <ion-col total col-2>
            <ion-label text-wrap type="number" placeholder="0" value="0.00">{{ totalAcco() }}</ion-label>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col type col-6>Mileage/Petrol

            <ion-item no-lines *ngIf="signupform.errors?.identityRevealed && signupform.get('day_mile').touched">
              <textarea readonly class="error" *ngIf="signupform.errors?.identityRevealed && signupform.get('day_meal').touched">Please input your mile day
              </textarea>
            </ion-item>

            <ion-item no-lines *ngIf="( signupform.get('all_mile').hasError('required') ) && signupform.get('all_mile').touched">
                <textarea readonly class="error" *ngIf="signupform.get('all_mile').hasError('required') && signupform.get('all_mile').touched">Please input your mile allowance per day
                </textarea>
              </ion-item>

          </ion-col>
          <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_mile" value=" " formControlName="day_mile" [class.error1]="!signupform.controls.day_mile.valid && signupform.controls.day_mile.dirty"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_mile" value=" " formControlName="all_mile" [class.error1]="!signupform.controls.all_mile.valid && signupform.controls.all_mile.dirty"></ion-input>
          </ion-col>
          <!-- <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_mile"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_mile"></ion-input>
          </ion-col> -->
          <ion-col total col-2>
            <ion-label text-wrap type="number" placeholder="0" value="0.00">{{ totalMile() }}</ion-label>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col type col-6>Parking/Tolls

            <ion-item no-lines *ngIf="signupform.errors?.identityRevealed && signupform.get('day_parking').touched">
              <textarea readonly class="error" *ngIf="signupform.errors?.identityRevealed && signupform.get('day_parking').touched">Please input your parking day
              </textarea>
            </ion-item>

            <ion-item no-lines *ngIf="( signupform.get('all_parking').hasError('required') ) && signupform.get('all_parking').touched">
              <textarea readonly class="error" *ngIf="signupform.get('all_parking').hasError('required') && signupform.get('all_parking').touched">Please input your parking allowance per day
              </textarea>
            </ion-item>

          </ion-col>
          <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_parking" value=" " formControlName="day_parking" [class.error1]="!signupform.controls.day_parking.valid && signupform.controls.day_parking.dirty"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_parking" value=" " formControlName="all_parking" [class.error1]="!signupform.controls.all_parking.valid && signupform.controls.all_parking.dirty"></ion-input>
          </ion-col>
          <!-- <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_parking"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_parking"></ion-input>
          </ion-col> -->
          <ion-col total col-2>
            <ion-label text-wrap type="number" placeholder="0" value="0.00">{{ totalParking() }}</ion-label>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col type col-6>Fare/Ticket

            <ion-item no-lines *ngIf="signupform.errors?.identityRevealed && signupform.get('day_fare').touched">
              <textarea readonly class="error" *ngIf="signupform.errors?.identityRevealed && signupform.get('day_fare').touched">Please input your fare day
              </textarea>
            </ion-item>

            <ion-item no-lines *ngIf="( signupform.get('all_fare').hasError('required') ) && signupform.get('all_fare').touched">
              <textarea readonly class="error" *ngIf="signupform.get('all_fare').hasError('required') && signupform.get('all_fare').touched">Please input your fare allowance per day
              </textarea>
            </ion-item>

          </ion-col> 
          <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_fare" value=" " formControlName="day_fare" [class.error1]="!signupform.controls.day_fare.valid && signupform.controls.day_fare.dirty"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_fare" value=" " formControlName="all_fare" [class.error1]="!signupform.controls.all_fare.valid && signupform.controls.all_fare.dirty"></ion-input>
          </ion-col>
          <!-- <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_fare"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_fare"></ion-input>
          </ion-col> -->
          <ion-col total col-2>
            <ion-label text-wrap type="number" placeholder="0" value="0.00">{{ totalFare() }}</ion-label>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col type col-6>Other Purpose

            <ion-item no-lines *ngIf="signupform.errors?.identityRevealed && signupform.get('day_other').touched">
              <textarea readonly class="error" *ngIf="signupform.errors?.identityRevealed && signupform.get('day_other').touched">Please input your other purpose day
              </textarea>
            </ion-item>

            <ion-item no-lines *ngIf="( signupform.get('all_other').hasError('required') ) && signupform.get('all_other').touched">
              <textarea readonly class="error" *ngIf="signupform.get('all_other').hasError('required') && signupform.get('all_other').touched">Please input your other purpose allowance per day
              </textarea>
            </ion-item>

          </ion-col>
          <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_other"  formControlName="day_other" [class.error1]="!signupform.controls.day_other.valid && signupform.controls.day_other.dirty"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_other" value=" " formControlName="all_other" [class.error1]="!signupform.controls.all_other.valid && signupform.controls.all_other.dirty"></ion-input>
          </ion-col>
          <!-- <ion-col days col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="day_other"></ion-input>
          </ion-col>
          <ion-col allowance col-2>
            <ion-input type="number" placeholder="0" [(ngModel)]="all_other"></ion-input>
          </ion-col> -->
          <ion-col total col-2>
            <ion-label text-wrap type="number" placeholder="0" value="0.00">{{ totalOther() }}</ion-label>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col allowance col-10>
            <ion-item>

              <ion-input type="text" placeholder="State your other purpose..." [(ngModel)]="Purpose"  formControlName="Purpose" [class.error1]="!signupform.controls.Purpose.valid && signupform.controls.Purpose.dirty">
              </ion-input>
            </ion-item>
              <!-- <ion-input type="text" placeholder="Other Purpose..." [(ngModel)]="Purpose">
            </ion-input> -->
            <ion-item no-lines *ngIf="( signupform.get('Purpose').hasError('required') ) && signupform.get('Purpose').touched">
              <textarea readonly class="error" *ngIf="signupform.get('Purpose').hasError('required') && signupform.get('Purpose').touched">Please state your purpose
              </textarea>
            </ion-item>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col allowance col-10>
            <ion-item>
              <ion-input text-wrap type="text" placeholder="Purchase" [(ngModel)]="purchase" formControlName="purchase" [class.error1]="!signupform.controls.purchase.valid && signupform.controls.purchase.dirty">
              </ion-input>
            </ion-item>
            <!-- <ion-input type="text" placeholder="Purchase" [(ngModel)]="purchase">
            </ion-input> -->
            <ion-item no-lines *ngIf="signupform.errors?.identityRevealed && signupform.get('purchase').touched">
              <textarea readonly class="error" *ngIf="signupform.errors?.identityRevealed && signupform.get('purchase').touched">Please state your purchase
              </textarea>
            </ion-item>

            <ion-item no-lines *ngIf="( signupform.get('all_purchase').hasError('required') ) && signupform.get('all_purchase').touched">
              <textarea readonly class="error" *ngIf="signupform.get('all_purchase').hasError('required') && signupform.get('all_purchase').touched">Please insert your purchase amount
              </textarea>
            </ion-item>
            
          </ion-col>
          <ion-col total col-2>
            <ion-input type="number" placeholder="0"  [(ngModel)]="all_purchase" formControlName="all_purchase" [class.error1]="!signupform.controls.all_purchase.valid && signupform.controls.all_purchase.dirty"></ion-input>
            <!-- <ion-input type="number" placeholder="    0" [(ngModel)]="all_purchase"></ion-input> -->
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col total-advance col-10>Total Advanced Request</ion-col>
          <ion-col total col-2>
            <ion-label text-wrap type="number" placeholder="0" value="0.00"> {{ totalAdvance() }}</ion-label>
          </ion-col>
        </ion-row>

      </ion-grid>
      
      <button ion-button block color="primary" type="submit" [disabled]="signupform.invalid">
        Submit 
      </button>
    </form>
  </ion-list>


  <style>
    .required:after { content:" *"; color:red; }
  </style>

</ion-content>

<!-- <ion-footer>
  <button ion-button block color="primary" type="submit" [disabled]="signupform.invalid">Submit</button>
</ion-footer> -->
